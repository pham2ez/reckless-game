(function(e){function t(t){for(var o,i,r=t[0],c=t[1],l=t[2],m=0,d=[];m<r.length;m++)i=r[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={app:0},s=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"05bb":function(e,t,n){e.exports=n.p+"img/Duke.52768b42.png"},"0a13":function(e,t,n){},1:function(e,t){},"114d":function(e,t,n){},"1a40":function(e,t,n){"use strict";var o=n("9f54"),a=n.n(o);a.a},"1f1d":function(e,t,n){},"2c1e":function(e,t,n){"use strict";var o=n("f46a"),a=n.n(o);a.a},5386:function(e,t,n){"use strict";var o=n("8216"),a=n.n(o);a.a},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"socket",(function(){return ve})),n.d(t,"eventBus",(function(){return ge}));n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{type:"dark",variant:"info"}},[n("b-navbar-brand",{attrs:{href:"#"}},[e._v("Coup")]),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e.signedin&&!e.inRoom?n("b-navbar-nav",[n("b-form-input",{staticClass:"mr-sm-2",attrs:{size:"sm",placeholder:"Search Room..."},on:{input:e.changeSearch},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1):e._e(),e.signedin?n("b-navbar-nav",{staticClass:"ml-auto"},[e.inRoom?e._e():n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.my-modal",modifiers:{"my-modal":!0}}]},[e._v("Create a Room")]),e.inGame?e._e():n("b-nav-item",{attrs:{href:"#"},on:{click:e.signOut}},[e._v("Sign Out")])],1):e._e()],1)],1),n("b-modal",{attrs:{id:"my-modal",title:"Create a Room"},on:{ok:e.createRoom}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.roomName,expression:"roomName"}],attrs:{type:"text",placeholder:"Enter a room name"},domProps:{value:e.roomName},on:{input:function(t){t.target.composing||(e.roomName=t.target.value)}}})]),e.signedin&&!e.inRoom?n("div",{staticClass:"home"},[n("div",{staticClass:"big"},[n("GamesList")],1),n("div",{staticClass:"small"},[n("FriendsList")],1)]):e._e(),e.signedin?e._e():n("SignUpIn"),n("WaitRoomView",{directives:[{name:"show",rawName:"v-show",value:e.signedin&&e.inRoom,expression:"signedin && inRoom"}],attrs:{username:e.username}})],1)},s=[],i=(n("386d"),n("bc3a")),r=n.n(i),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"sign"}},[n("b-tabs",{attrs:{"content-class":"mt-3",justified:""},on:{input:function(t){return e.clear()}},model:{value:e.modeIndex,callback:function(t){e.modeIndex=t},expression:"modeIndex"}},[n("b-tab",{attrs:{title:"Sign In"}}),n("b-tab",{attrs:{title:"Sign Up",active:""}})],1),n("form",{attrs:{id:"form",method:"post"},on:{submit:function(t){return t.preventDefault(),e.submitThis(t)}}},[n("div",{staticClass:"form-group"},[n("h2",[e._v(e._s(e.title))]),n("label",{attrs:{for:"username"}},[e._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{id:"username",type:"text",placeholder:[[e.userPrompt]]},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),n("label",{attrs:{for:"password"}},[e._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"text",placeholder:[[e.passPrompt]]},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("input",{attrs:{type:"submit"},domProps:{value:e.title}})])])],1)},l=[],u={name:"SignUpIn",data:function(){return{modeIndex:0,options:["signin","signup"],username:"",password:""}},computed:{title:function(){return 0===this.modeIndex?"Sign In":1===this.modeIndex?"Sign Up":void 0},userPrompt:function(){return 0===this.modeIndex?"Enter your username":1===this.modeIndex?"Enter your password":void 0},passPrompt:function(){return 0===this.modeIndex?"Create a username":1===this.modeIndex?"Create a password":void 0}},methods:{submitThis:function(){0===this.modeIndex?this.signIn():1===this.modeIndex&&this.signUp()},clear:function(){this.username="",this.password=""},signIn:function(){var e=this,t={username:this.username,password:this.password};r.a.post("/api/user/signin",t).then((function(t){ge.$emit("signin-success",t.data.username),e.clear()})).catch((function(e){ge.$emit("error",e.response.data.error)}))},signUp:function(){var e=this,t={username:this.username,password:this.password};r.a.post("/api/user",t).then((function(t){ge.$emit("signin-success",t.data.username),e.clear()})).catch((function(e){ge.$emit("error",e.response.data.error)}))}}},m=u,d=(n("a651"),n("2877")),h=Object(d["a"])(m,c,l,!1,null,null,null),f=h.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friendsList"},[n("b-tabs",{attrs:{"content-class":"mt-3",justified:""}},[n("b-tab",{attrs:{title:"Friends",active:""},on:{click:e.getFriends}},e._l(e.show,(function(e){return n("FriendsItem",{key:e,attrs:{username:e,mode:0}})})),1),n("b-tab",{attrs:{title:"Requests"},on:{click:e.getRequests}},e._l(e.show,(function(e){return n("FriendsItem",{key:e,attrs:{username:e,mode:1}})})),1),n("b-tab",{staticClass:"flex-container",attrs:{title:"Add"},on:{click:e.changeSearch}},[n("div",{staticClass:"container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"small",attrs:{type:"text",placeholder:"Search user..."},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.changeSearch]}}),e._l(e.show,(function(e){return n("FriendsItem",{key:e,staticClass:"small",attrs:{username:e,mode:2}})}))],2)])],1)],1)},v=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friend"},[n("b-card",{attrs:{title:e.username}},[n("b-card-text",[e._v(" "+e._s(e.showStatus)+" ")]),"room"===e.status?n("b-button",{attrs:{variant:"primary"}},[e._v(" Join ")]):e._e(),1===e.mode?n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.accept()}}},[e._v(" Accept ")]):e._e(),1===e.mode?n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.reject()}}},[e._v(" Delete ")]):e._e(),2===e.mode?n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.request()}}},[e._v(" Request ")]):e._e()],1)],1)},b=[],y={name:"FriendsItem",props:["username","mode","status","roomID"],created:function(){},computed:{showStatus:function(){return"room"===this.status?"Waiting":"game"===this.status?"In game":void 0}},methods:{join:function(){r.a.put("/api/room/players/"+this.roomID,{}).then((function(e){ge.$emit("joined-room",e.data)}))},accept:function(){r.a.put("/api/user/request/"+this.username,{}).then((function(){ge.$emit("update-requests")}))},reject:function(){r.a.delete("/api/user/request/"+this.username,{}).then((function(){ge.$emit("update-requests")}))},request:function(){r.a.post("/api/user/request/"+this.username,{}).then((function(){ge.$emit("friend-requested")}))}}},w=y,I=Object(d["a"])(w,g,b,!1,null,"006388cf",null),C=I.exports,_={name:"FriendsList",components:{FriendsItem:C},data:function(){return{mode:"friends",show:[],search:""}},created:function(){var e=this;this.getFriends(),ge.$on("friend-requested",(function(){e.search="",e.show=[]})),ge.$on("update-requests",(function(){e.getRequests()}))},computed:{},methods:{getFriends:function(){var e=this;this.search="",r.a.get("/api/user/friends",{}).then((function(t){e.show=t.data}))},getRequests:function(){var e=this;this.search="",r.a.get("/api/user/request/",{}).then((function(t){e.show=t.data}))},changeSearch:function(){var e=this;""===this.search?this.show=[]:r.a.get("/api/user/find/"+this.search,{}).then((function(t){e.show=t.data}))}}},A=_,k=(n("5386"),Object(d["a"])(A,p,v,!1,null,"0c2c4186",null)),x=k.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gamesList"},e._l(e.gameList,(function(e){return n("GameItem",{key:e.id,attrs:{roomName:e.roomName,roomID:e.id,players:e.players}})})),1)},P=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game"},[n("b-card",{attrs:{title:e.roomName}},[n("b-card-text",[e._v(" ID: "+e._s(e.roomID)+" "),n("br"),e._v(" Players: "+e._s(e.players)+" ")]),n("b-button",{attrs:{variant:"primary"},on:{click:e.join}},[e._v("Join")])],1)],1)},N=[],j={name:"GameItem",props:["roomName","roomID","players"],data:function(){return{}},created:function(){},computed:{},methods:{join:function(){var e=this;r.a.put("/api/room/players/"+this.roomID,{}).then((function(t){ve.emit("join",{id:e.roomID,players:t.data.players}),ge.$emit("joined-room",t.data)}))}}},O=j,R=Object(d["a"])(O,$,N,!1,null,"23b27bd2",null),S=R.exports,K={name:"GamesList",components:{GameItem:S},props:[],data:function(){return{gameList:[]}},created:function(){var e=this;ve.on("create",(function(){e.getRooms()})),ve.on("leave",(function(){e.getRooms()})),ge.$on("room-added",(function(){e.getRooms()})),ge.$on("search",(function(t){""===t?e.getRooms():r.a.get("/api/room/find/"+t,{}).then((function(t){e.gameList=t.data}))})),this.getRooms()},computed:{},methods:{getRooms:function(){var e=this;r.a.get("/api/room/rooms",{}).then((function(t){e.gameList=t.data}))}}},T=K,G=Object(d["a"])(T,D,P,!1,null,"d7f84800",null),E=G.exports,B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wait"},[o("h2",[e._v(e._s(e.roomName))]),e._v(" "+e._s(e.players.length)+"/6 players "),o("div",{staticClass:"players"},e._l(e.players.length,(function(t){return o("b-card",{key:e.players[t-1],attrs:{title:e.players[t-1],"bg-variant":e.username===e.players[t-1]?"info":"light"}},[o("b-card-text",[e._v(" "+e._s(e.playerText(e.players[t-1]))+" ")])],1)})),1),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.inGame&&!e.loading,expression:"!inGame && !loading"}],staticClass:"buttons"},[o("b-button",{attrs:{disabled:e.username!==e.creator||e.players.length<2},on:{click:e.start}},[e._v("Start")]),o("b-button",{on:{click:e.leave}},[e._v("Leave")])],1),o("b-spinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{variant:"primary",label:"Spinning"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.inGame,expression:"inGame"}]},[o("div",{staticClass:"info"},[e._v(" "+e._s(e.deadCardsText)+" "),o("b-button",{directives:[{name:"show",rawName:"v-show",value:e.inGame,expression:"inGame"},{name:"b-modal",rawName:"v-b-modal",value:"info",expression:"'info'"}]},[e._v("Info")]),o("b-modal",{attrs:{id:"info",size:"lg",title:"Coup Actions","hide-footer":""}},[o("b-img",{attrs:{src:n("bdee"),"fluid-grow":""}})],1)],1),o("b-modal",{attrs:{visible:e.inGame&&""!==e.winner,"hide-header":"","hide-footer":""}},[e._v(" The winner is "+e._s(e.winner)+". "),e.creator===e.username?o("b-button",{on:{click:e.end}},[e._v("End")]):e._e()],1)],1),o("div",{staticClass:"columns"},[o("Messages",{attrs:{roomID:e.roomID}}),e.dead?e._e():o("CoupView",{attrs:{username:e.username,players:e.players,roomID:e.roomID}})],1)],1)},F=[],q=(n("ac4d"),n("8a81"),n("ac6a"),n("6762"),n("2fdb"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"messageBox"},[n("b-form-textarea",{staticStyle:{"border-style":"solid 5px","box-shadow":"0 0 10px #719ECE","border-color":"#00cdcd","font-size":"15px","font-weight":"bold","font-family":"'Arial'"},attrs:{id:"textarea",rows:"26",plaintext:"","no-resize":""},model:{value:e.messages,callback:function(t){e.messages=t},expression:"messages"}})],1)}),L=[],U={name:"Messages",props:["roomID"],data:function(){return{messages:""}},created:function(){var e=this;ge.$on("add-message",(function(t){e.messages+="\n- "+t.message,document.getElementById("textarea").scrollTop=document.getElementById("textarea").scrollHeight,ve.emit("message",t)})),ge.$on("left-room",(function(){e.messages=""})),ve.on("message",(function(t){e.roomID===t.roomID&&(e.messages+="\n- "+t.message,e.$nextTick((function(){document.getElementById("textarea").scrollTop=document.getElementById("textarea").scrollHeight})))}))}},M=U,V=(n("da8c"),Object(d["a"])(M,q,L,!1,null,"12183b70",null)),H=V.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{class:e.classy,style:e.style,attrs:{title:e.title,"img-top":"","img-src":e.img},on:{click:e.choose,mouseover:e.onHover,mouseout:e.onLeave}},[n("b-card-text",[e._v(" "+e._s(e.info)+" ")])],1)},J=[],W={name:"CoupView",props:["role","available"],data:function(){return{hover:!1}},created:function(){},computed:{title:function(){return"A1"===this.role?"Ambassador":"C"===this.role?"Contessa":"D"===this.role?"Duke":"N"===this.role?"Assassin":"T"===this.role?"Captain":void 0},info:function(){return"A1"===this.role?"Exchange cards with Court Deck.\nBlocks stealing.":"C"===this.role?"Blocks assassination.":"D"===this.role?"Take 3 coins from Treasury.\nBlocks Foreign Aid.":"N"===this.role?"Pay 3 coins to assassinate another player.":"T"===this.role?"Steal 2 coins from another player.\nBlocks stealing.":void 0},style:function(){return this.hover?"max-width: 15rem;":"max-width: 12rem"},img:function(){return"A1"===this.role?n("cc37"):"C"===this.role?n("8c12"):"D"===this.role?n("05bb"):"N"===this.role?n("9455"):"T"===this.role?n("c530"):void 0},classy:function(){return this.available?"":"dark"}},methods:{choose:function(){this.available&&ge.$emit("chosen-card",this.role)},onHover:function(){this.hover=!0},onLeave:function(){this.hover=!1}}},Q=W,X=(n("1a40"),Object(d["a"])(Q,z,J,!1,null,"1ac85641",null)),Y=X.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"coup"},[null!==e.gameInfo?n("div",[e._v(" My Cards: "+e._s(e.myCards))]):e._e(),null!==e.gameInfo?n("div",[e._v(e._s(e.players[e.gameInfo.playerIndex])+"'s turn")]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.currentPlayer&&null===e.chosenAction,expression:"currentPlayer && chosenAction === null"}],staticClass:"actions"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.coup,expression:"!coup"}],on:{click:e.income}},[e._v("Income")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.coup,expression:"!coup"}],on:{click:e.foreignAid}},[e._v("Foreign Aid")]),n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.available||e.coup,expression:"(available || coup)"}],on:{click:e.coupClick}},[e._v("Coup")])],1),!e.currentPlayer&&!e.blockingPlayer||e.coup?e._e():n("div",{staticClass:"cards"},[n("Card",{attrs:{role:"D",available:null===e.chosenAction||"FA"===e.chosenAction}}),n("Card",{attrs:{role:"N",available:null===e.chosenAction&&e.gameInfo.coinDict[e.username]>=3}}),n("Card",{attrs:{role:"A1",available:null===e.chosenAction||"T"===e.chosenAction}}),n("Card",{attrs:{role:"T",available:null===e.chosenAction||"T"===e.chosenAction}}),n("Card",{attrs:{role:"C",available:"N"===e.chosenAction}})],1),n("div",{staticClass:"mine"},[n("b-modal",{attrs:{visible:e.showChoose,"hide-footer":"","hide-header":""}},e._l(e.players,(function(t){return n("b-button",{directives:[{name:"show",rawName:"v-show",value:t!==e.username,expression:"player !== username"}],key:t,on:{click:function(n){return e.choose(t)}}},[e._v(e._s(t))])})),1),null!==e.currentAction?n("b-modal",{attrs:{visible:e.show,"hide-footer":"","hide-header":""}},[e.currentAction.blockable?n("b-button",{on:{click:e.block}},[e._v("Block")]):e._e(),e.currentAction.challengable?n("b-button",{on:{click:e.challenge}},[e._v("Challenge")]):e._e(),n("b-button",{on:{click:e.handleOk}},[e._v("Do Nothing")])],1):e._e(),null!==e.gameInfo?n("b-modal",{attrs:{visible:e.showKill,"ok-only":"","hide-header":"","hide-footer":""}},[e._l(e.gameInfo.myCards.length,(function(t){return n("b-button",{key:e.gameInfo.myCards[t-1]+t,attrs:{pressed:e.inKill[t-1]},on:{"update:pressed":function(n){return e.$set(e.inKill,t-1,n)},click:function(n){return e.kill(t-1)}}},[e._v(" "+e._s(e.dict[e.gameInfo.myCards[t-1]]))])})),n("b-button",{attrs:{disabled:0!==e.numKill},on:{click:e.handleKill}},[e._v("Finish")])],2):e._e()],1)])},ee=[],te={name:"CoupView",components:{Card:Y},props:["username","players","roomID"],data:function(){return{chosenAction:null,chosenPlayer:null,currentAction:null,blocking:!1,currentPlayer:!1,blockingPlayer:!1,showChoose:!1,showBlock:!1,showChallenge:!1,showKill:!1,available:!1,coup:!1,oks:0,numKill:0,inKill:[!1,!1,!1,!1],dict:{A1:"Ambassador",C:"Contessa",T:"Captain",D:"Duke",N:"Assassin"},gameInfo:null}},created:function(){var e=this;ve.on("getInfo",(function(){"A1"!==e.chosenAction&&"A2"!==e.chosenAction&&"BS1"!==e.chosenAction&&e.clear(),r.a.get("/api/coup/info/"+e.roomID,e.body).then((function(t){e.gameInfo=t.data,e.currentPlayer=e.username===e.players[t.data.playerIndex];var n=e.gameInfo.coinDict[e.username];n<7?(e.available=!1,e.coup=!1):n>=10?(e.available=!0,e.coup=!0):(e.available=!0,e.coup=!1),ge.$emit("game-info",t.data),"A1"===e.chosenAction&&(e.chosenAction="A2",e.showKill=!0)}))})),ge.$on("ended",(function(){e.clear()})),ve.on("action",(function(t){e.currentAction=t,t.toPlayer!==e.username||t.blockable||t.challengable||(e.chosenAction="COUP",e.numKill=1,e.showKill=!0),t.toPlayer!==e.username&&"FA"!==e.currentAction.action||("FA"===e.currentAction.action&&(e.chosenAction="FA"),e.showBlock=t.blockable),e.showChallenge=t.challengable})),ve.on("challenge",(function(t){if(e.username===t.toPlayer&&e.gameInfo.myCards.includes(t.action)){var n="A"===e.chosenAction?2:1;ve.emit("challengeResults",{loser:t.fromPlayer,kill:n}),ge.$emit("add-message",{message:e.username+" did have "+e.dict[e.chosenAction],roomID:e.roomID}),"A"!==e.chosenAction&&e.finish()}else e.username!==t.toPlayer||e.gameInfo.myCards.includes(t.action)||(ge.$emit("add-message",{message:e.username+" did not have "+e.dict[e.chosenAction],roomID:e.roomID}),e.chosenAction="BS2",e.showKill=!0,e.numKill=1)})),ve.on("challengeResults",(function(t){e.username===t.loser&&(e.chosenAction="BS1",e.showKill=!0,e.numKill=t.kill)})),ve.on("ok",(function(t){e.username===t.player&&(e.oks++,e.oks===e.players.length-1&&e.finish())})),ge.$on("chosen-card",(function(t){e.currentPlayer=!1,e.blockingPlayer=!1,e.chosenAction=t,e.blocking?(ge.$emit("add-message",{message:e.username+" blocks with "+e.dict[e.chosenAction],roomID:e.roomID}),ve.emit("action",{action:e.chosenAction,blockedAction:e.currentAction.action,blockable:!1,challengable:!0,fromPlayer:e.username,toPlayer:e.currentAction.fromPlayer})):"N"===t||"T"===t?e.showChoose=!0:(ge.$emit("add-message",{message:e.username+" chose "+e.dict[t],roomID:e.roomID}),ve.emit("action",{action:e.chosenAction,blockable:!1,challengable:!0,fromPlayer:e.username}))}))},computed:{myCards:function(){for(var e="",t=0;t<this.gameInfo.myCards.length;t++)e+=this.dict[this.gameInfo.myCards[t]]+" ";return e},show:function(){return(this.showChallenge||this.showBlock)&&!this.blocking}},methods:{clear:function(){this.chosenPlayer=null,this.chosenAction=null,this.currentAction={},this.blocking=!1,this.blockingPlayer=!1,this.showChoose=!1,this.showBlock=!1,this.showChallenge=!1,this.showKill=!1,this.oks=0,this.numKill=0,this.inKill=[!1,!1,!1,!1]},income:function(){this.chosenAction="IN",this.finish(),ge.$emit("add-message",{message:this.username+" chose income",roomID:this.roomID})},foreignAid:function(){this.chosenAction="FA",this.currentPlayer=!1,ge.$emit("add-message",{message:this.username+" chose foreign aid",roomID:this.roomID}),ve.emit("action",{action:this.chosenAction,fromPlayer:this.username,blockable:!0,challengable:!1})},coupClick:function(){this.showChoose=!0,this.chosenAction="COUP"},choose:function(e){this.chosenPlayer=e,this.showChoose=!1,ge.$emit("add-message",{message:this.username+" picked "+e+" to use "+this.dict[this.chosenAction]+" on",roomID:this.roomID}),ve.emit("action",{action:this.chosenAction,blockable:"COUP"!==this.chosenAction,challengable:"COUP"!==this.chosenAction,fromPlayer:this.username,toPlayer:e})},finish:function(){var e=this;this.body={id:this.roomID,player1:this.username,player2:this.chosenPlayer,action:this.chosenAction},r.a.put("/api/coup/move",this.body).then((function(){ve.emit("getInfo"),"A1"===e.chosenAction&&(e.numKill=2)}))},block:function(){this.blocking=!0,this.blockingPlayer=!0,this.chosenAction=this.currentAction.action},challenge:function(){this.showChallenge=!1,this.showBlock=!1,ge.$emit("add-message",{message:this.username+" challenges "+this.currentAction.fromPlayer+"'s "+this.dict[this.currentAction.action],roomID:this.roomID}),ve.emit("challenge",{action:this.currentAction.action,fromPlayer:this.username,toPlayer:this.currentAction.fromPlayer})},handleOk:function(){void 0===this.currentAction.blockedAction?(ge.$emit("add-message",{message:"Action successfully went through",roomID:this.roomID}),this.showBlock=!1,this.showChallenge=!1,"N"===this.currentAction.action?(this.chosenAction="N",this.numKill=1,this.showKill=!0):ve.emit("ok",{player:this.currentAction.fromPlayer})):(ge.$emit("add-message",{message:"Action was successfully blocked",roomID:this.roomID}),r.a.get("/api/coup/next/"+this.roomID).then((function(){ve.emit("getInfo")})))},handleKill:function(){var e=this;this.showKill=!1;for(var t=[],n=this.username+" chose to kill ",o=0;o<this.inKill.length;o++)this.inKill[o]&&(t.push(this.gameInfo.myCards[o]),n+=this.dict[this.gameInfo.myCards[o]]+" ");ge.$emit("add-message",{message:n+"to die",roomID:this.roomID}),this.body={id:this.roomID,player1:this.currentAction.fromPlayer,player2:this.username,action:this.chosenAction,cards:t},r.a.put("/api/coup/move",this.body).then((function(){e.clear(),ve.emit("getInfo")}))},kill:function(e){this.inKill[e]?this.numKill--:this.numKill++}}},ne=te,oe=(n("7df7"),Object(d["a"])(ne,Z,ee,!1,null,"3b5363ac",null)),ae=oe.exports,se={name:"WaitRoomView",components:{Messages:H,CoupView:ae,Card:Y},props:["username"],data:function(){return{creator:"",players:[],roomID:"",roomName:"",dead:!1,deadCards:{},deadPlayers:[],numCards:{},coinDict:{},inGame:!1,winner:"",loading:!1,dict:{A1:"Ambassador",C:"Contessa",T:"Captain",D:"Duke",N:"Assassin"}}},created:function(){var e=this;ve.on("join",(function(t){t.id==e.roomID&&(e.players=t.players)})),ve.on("leave",(function(t){t.id==e.roomID&&(e.players=t.players,e.creator=t.creator)})),ve.on("ended",(function(){e.clear()})),ve.on("winner",(function(t){e.winner=t})),ge.$on("joined-room",(function(t){e.creator=t.creator,e.players=t.players,e.roomID=t.id,e.roomName=t.roomName})),ge.$on("leave-room",(function(){e.leave()})),ge.$on("leave-room",(function(){e.leave()})),ge.$on("game-info",(function(t){if(e.loading=!1,e.deadPlayers=t.deadPlayers,e.dead=t.deadPlayers.includes(e.username),e.deadCards=t.deadCards,e.numCards=t.numCards,e.coinDict=t.coinDict,e.inGame=!0,t.deadPlayers.length===e.players.length-1){var n=!0,o=!1,a=void 0;try{for(var s,i=e.players[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var r=s.value;if(!e.deadPlayers.includes(r)){e.winner=r;break}}}catch(c){o=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}ve.emit("winner",e.winner)}})),ve.on("started",(function(){e.inGame=!0})),ve.on("loading",(function(){e.loading=!0}))},computed:{deadCardsText:function(){var e="";for(var t in this.deadCards)e+=this.dict[t]+": "+this.deadCards[t]+"/3","D"!==t&&(e+="\n");return e}},methods:{clear:function(){this.dead=!1,this.deadCards={},this.deadPlayers=[],this.numCards={},this.coinDict={},this.inGame=!1,this.winner=""},playerText:function(e){return this.inGame&&!this.deadPlayers.includes(e)?"Coins: "+this.coinDict[e]+"\nCards in Hand: "+this.numCards[e]:this.inGame&&this.deadPlayers.includes(e)?"Dead":"Ready"},leave:function(){var e=this;r.a.delete("/api/room/players/"+this.roomID,{}).then((function(t){ge.$emit("add-message",{message:e.username+" left the room.",roomID:e.roomID}),ve.emit("leave",t.data),ge.$emit("left-room")}))},start:function(){this.loading=!0,ve.emit("loading"),ge.$emit("add-message",{message:"Game started",roomID:this.roomID}),r.a.put("/api/room/start/"+this.roomID,{}).then((function(){ve.emit("getInfo")}))},end:function(){var e=this;r.a.put("/api/room/end/"+this.roomID,{}).then((function(){e.clear(),ge.$emit("ended"),ve.emit("ended")}))}}},ie=se,re=(n("f764"),Object(d["a"])(ie,B,F,!1,null,"6d5e7d40",null)),ce=re.exports,le={name:"app",components:{SignUpIn:f,FriendsList:x,GamesList:E,WaitRoomView:ce},data:function(){return{username:null,roomName:"",search:"",roomID:null,inRoom:!1,inGame:!1}},computed:{signedin:function(){return null!==this.username}},methods:{signOut:function(){var e=this;r.a.delete("/api/room/players/"+this.roomID,{}).then((function(){ge.$emit("leave-room"),r.a.delete("/api/user/signout",{}).then((function(){e.clearUser()}))}))},clearUser:function(){this.username=null},createRoom:function(){var e=this;r.a.post("/api/room",{content:this.roomName}).then((function(t){console.log(t.data),ge.$emit("joined-room",t.data),ge.$emit("room-added"),ve.emit("create"),e.roomName=""}))},changeSearch:function(){ge.$emit("search",this.search)}},created:function(){var e=this;r.a.get("/api/user/signedin",{}).then((function(e){ge.$emit("signin-success",e.data)})),ge.$on("joined-room",(function(t){e.roomID=t.id,e.inRoom=!0,ge.$emit("add-message",{message:e.username+" joined the room.",roomID:e.roomID})})),ge.$on("left-room",(function(){e.inRoom=!1})),ge.$on("signin-success",(function(t){e.username=t}))}},ue=le,me=(n("2c1e"),Object(d["a"])(ue,a,s,!1,null,"60e2e72e",null)),de=me.exports,he=n("5f5b"),fe=(n("f9e3"),n("2dd8"),n("8055")),pe=n.n(fe),ve=pe()("http://localhost:5000");o["default"].use(he["a"]);var ge=new o["default"];o["default"].config.productionTip=!1,new o["default"]({render:function(e){return e(de)}}).$mount("#app")},"7c93":function(e,t,n){},"7df7":function(e,t,n){"use strict";var o=n("0a13"),a=n.n(o);a.a},8216:function(e,t,n){},"8c12":function(e,t,n){e.exports=n.p+"img/Contessa.0f057f6e.png"},9455:function(e,t,n){e.exports=n.p+"img/Assassin.2bfd2098.png"},"9f54":function(e,t,n){},a651:function(e,t,n){"use strict";var o=n("114d"),a=n.n(o);a.a},bdee:function(e,t,n){e.exports=n.p+"img/rules.3c07b809.png"},c530:function(e,t,n){e.exports=n.p+"img/Captain.37583f35.jpg"},cc37:function(e,t,n){e.exports=n.p+"img/Ambassador.f239fc0d.jpg"},da8c:function(e,t,n){"use strict";var o=n("7c93"),a=n.n(o);a.a},f46a:function(e,t,n){},f764:function(e,t,n){"use strict";var o=n("1f1d"),a=n.n(o);a.a}});
//# sourceMappingURL=app.d362fd95.js.map